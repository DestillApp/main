<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>JSDoc: Source: components/plant/PlantOrigin.vue</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link
      type="text/css"
      rel="stylesheet"
      href="styles/prettify-tomorrow.css"
    />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css" />
  </head>

  <body>
    <div id="main">
      <h1 class="page-title">Source: components/plant/PlantOrigin.vue</h1>

      <section>
        <article>
          <pre class="prettyprint source linenums"><code>&lt;template>
  &lt;!-- Container for the plant orgin form -->
  &lt;div class="plant_origin">
    &lt;div>
      &lt;!-- Radio input for plant origin selection -->
      &lt;base-radio-input
        v-model="formData.plantOrigin"
        :options="origins"
        :title="title"
        name="plantOrigin"
      >
        &lt;template v-slot:message>
          &lt;span v-if="isFormValid === false &amp;&amp; formData.plantOrigin === ''"
            >Wybierz pochodzenie surowca&lt;/span
          >
          &lt;span v-else>&amp;nbsp;&lt;/span>
        &lt;/template>&lt;/base-radio-input
      >
    &lt;/div>
    &lt;!-- Container for harvest details, displayed if plant origin is 'zbiór' -->
    &lt;div v-if="formData.plantOrigin === 'zbiór'" class="plant_origin--harvest">
      &lt;div>
        &lt;!-- Date picker for selecting harvest date -->
        &lt;base-input-date-picker
          label="Data zbioru"
          title="Wybierz datę zbioru"
          id="harvestDate"
          :value="formData.harvestDate"
          @date:value="storeDate"
          :invalidInput="isFormValid === false &amp;&amp; formData.harvestDate === ''"
        >
        &lt;/base-input-date-picker>
        &lt;div class="message">
          &lt;span v-if="isFormValid === false &amp;&amp; formData.harvestDate === ''"
            >Wybierz datę zbioru&lt;/span
          >
          &lt;span v-else>&amp;nbsp;&lt;/span>
        &lt;/div>
      &lt;/div>
      &lt;div class="harvest_conditions">
        &lt;!-- Input field for entering harvest temperature -->
        &lt;base-text-input
          v-model="formData.harvestTemperature"
          type="number"
          classType="number"
          placeholder="°C"
          :invalidInput="
            isFormValid === false &amp;&amp; formData.harvestTemperature === null
          "
          @update:modelValue="setIntegerNumber"
          @set:keyboard="setKeyboardIntegerNumber"
          label="Temperatura podczas zbioru"
          id="harvestTemperature"
          min="-15"
          max="40"
          step="1"
        >
          &lt;template v-slot:unit>
            &lt;div v-if="formData.harvestTemperature !== null">°C&lt;/div>
          &lt;/template>
          &lt;template v-slot:message>
            &lt;span
              v-if="
                isFormValid === false &amp;&amp; formData.harvestTemperature === null
              "
              >Wpisz temperaturę zbioru&lt;/span
            >
            &lt;span v-else>&amp;nbsp;&lt;/span>
          &lt;/template>
        &lt;/base-text-input>
        &lt;div class="hours_container">
          &lt;!-- Label for the harvest hours slider -->
          &lt;label for="hours_slider" class="hours_label">Godziny zbioru&lt;/label>
          &lt;!-- Range slider for selecting harvest hours -->
          &lt;v-range-slider
            v-model="formData.harvestRange"
            class="slider"
            id="hours_slider"
            :min="300"
            :max="1320"
            :step="15"
            color="var(--secondary-color)"
          >
            &lt;template v-slot:prepend>
              &lt;base-text-input
                v-model="formData.harvestStartTime"
                type="text"
                classType="time"
                id="start_time"
                disabled="disabled"
              >&lt;/base-text-input>
            &lt;/template>
            &lt;template v-slot:append>
              &lt;base-text-input
                v-model="formData.harvestEndTime"
                type="text"
                classType="time"
                id="end_time"
                disabled="disabled"
              >&lt;/base-text-input>
            &lt;/template>
          &lt;/v-range-slider>
        &lt;/div>
      &lt;/div>
    &lt;/div>
    &lt;!-- Container for purchase details, displayed if plant origin is 'kupno' -->
    &lt;div v-if="formData.plantOrigin === 'kupno'" class="plant_origin--buy">
      &lt;div>
        &lt;!-- Date picker for selecting purchase date -->
        &lt;base-input-date-picker
          label="Data zakupu"
          title="Wybierz datę zakupu"
          id="plantBuyDate"
          :value="formData.plantBuyDate"
          @date:value="storeDate"
          :invalidInput="isFormValid === false &amp;&amp; formData.plantBuyDate === ''"
        >&lt;/base-input-date-picker>
        &lt;div class="message">
          &lt;span v-if="isFormValid === false &amp;&amp; formData.plantBuyDate === ''"
            >Wybierz datę zakupu&lt;/span
          >
          &lt;span v-else>&amp;nbsp;&lt;/span>
        &lt;/div>
      &lt;/div>
      &lt;!-- Input field for entering the name of the producer -->
      &lt;base-text-input
        v-model="formData.plantProducer"
        type="text"
        label="Nazwa producenta"
        id="plantProducer"
        :invalidInput="isFormValid === false &amp;&amp; formData.plantProducer === ''"
        @update:modelValue="setValue"
      >
        &lt;template v-slot:message>
          &lt;span v-if="isFormValid === false &amp;&amp; formData.plantProducer === ''"
            >Wpisz nazwę producenta&lt;/span
          >
          &lt;span v-else>&amp;nbsp;&lt;/span>
        &lt;/template>
      &lt;/base-text-input>
    &lt;/div>
  &lt;/div>
&lt;/template>


&lt;script>
import { useStore } from "@/store/useStore";
import { ref, reactive, computed, watch, onMounted } from "vue";
import BaseInputDatePicker from "@/ui/BaseInputDatePicker.vue";
import BaseTextInput from "@/ui/BaseTextInput.vue";

/**
 * @component PlantOrigin
 * @description This component renders a form to input and manage data related to plant used in distillation, including origin, harvest date, harvest temperature, harvest range, buy date and producer details.
 * @see setValue
 * @see setIntegerValue
 * @see setKeyboardIntegerNumber
 * @see storeDate
 */
export default {
  name: "PlantOrigin",
  components: { BaseInputDatePicker, BaseTextInput },
  props: ["isFormValid"],
  setup() {
    // Title of the radio inputs
    const title = ref("Pochodzenie surowca");
    // Options for plant origin
    const origins = reactive(["zbiór", "kupno"]);

    // Vuex store
    const store = useStore();
    // Computed properties to get form data from Vuex store
    const formData = computed(() => store.getters["plant/plantForm"]);
    const harvestRange = computed(() => store.getters["plant/harvestRange"]);
    const plantOrigin = computed(() => store.getters["plant/plantOrigin"]);

    // Fetch initial data from local storage on component mount
    onMounted(() => {
      store.dispatch("plant/fetchLocalStorageData", "plantOrigin");
      store.dispatch("plant/fetchLocalStorageData", "plantBuyDate");
      store.dispatch("plant/fetchLocalStorageData", "plantProducer");
      store.dispatch("plant/fetchLocalStorageData", "harvestDate");
      store.dispatch("plant/fetchLocalStorageData", "harvestTemperature");
      store.dispatch("plant/fetchLocalStorageData", "harvestRange");
    });

    /**
 * Function to dispatch an action to the Vuex store to set a specific value.
 * @function setValue
 * @param {any} currentValue - The current value to be set.
 * @param {string} input - The input field name.
 */
    const setValue = (currentValue, input) => {
      store.dispatch("plant/setValue", { input, value: currentValue });
    };

    /**
 * Function to format number input to integer and dispatch to store
 * @function setIntegerNumber
 * @param {number} currentValue - The current value to be formatted.
 * @param {string} input - The input field name.
 */
    //Function to format number input to integer and dispatch to store
    const setIntegerNumber = (currentValue, input) => {
      if (!currentValue || isNaN(currentValue)) {
        store.dispatch("plant/setValue", { input, value: null });
      } else {
        store.dispatch("plant/setIntegerValue", { input, value: currentValue });
      }
    };

    /**
 * Prevent keyboard input for non-integer values
 * @function setKeyboardIntegerNumber
 * @param {Event} e - The keyboard event.
 */
    const setKeyboardIntegerNumber = (e) => {
      if (e.key === "." || e.key === ",") {
        e.preventDefault();
      }
    };

    /**
  * Function to store a date value in the Vuex store
  * @function storeDate
  * @param {Date} date - The date value to be stored.
  * @param {string} input - The input field name.
  */
    const storeDate = (date, input) => {
      store.dispatch("plant/setValue", { input, value: date });
    };

    // Watcher to handle changes in harvest range
    watch(harvestRange, (newValue) => {
      store.dispatch("plant/setStartTime");
      store.dispatch("plant/setEndTime");
      store.dispatch("plant/setValue", {
        input: "harvestRange",
        value: newValue,
      });
    });

    // Watcher to handle changes in the plant origin
    watch(
      () => plantOrigin.value, // Watch the value of plantOrigin
      (newValue, oldValue) => {
        store.dispatch("plant/setValue", {
          input: "plantOrigin",
          value: newValue,
        });

        // If the new plant origin is 'kupno'
        if (newValue === "kupno") {
          // Set data to initial values if the previous origin was 'zbiór'
          if (oldValue === "zbiór") {
            store.dispatch("plant/setValue", {
              input: "harvestDate",
              value: "",
            });
            store.dispatch("plant/setValue", {
              input: "harvestTemperature",
              value: null,
            });
            store.dispatch("plant/setValue", {
              input: "harvestRange",
              value: [600, 900],
            });
          }
        }

        // If the new plant origin is 'zbiór'
        if (newValue === "zbiór") {
          // Set data to initial values if the previous origin was 'kupno'
          if (oldValue === "kupno") {
            store.dispatch("plant/setValue", {
              input: "plantBuyDate",
              value: "",
            });
            store.dispatch("plant/setValue", {
              input: "plantProducer",
              value: "",
            });
          }
        }
      }
    );

    return {
      formData,
      plantOrigin,
      title,
      origins,
      setValue,
      setIntegerNumber,
      setKeyboardIntegerNumber,
      storeDate,
    };
  },
};
&lt;/script>

&lt;style scoped>
.plant_origin {
  text-align: left;
}

.plant_origin--harvest {
  display: flex;
  flex-direction: column;
  gap: 30px;
}

.harvest_conditions {
  display: flex;
  flex-direction: row;
  width: 100%;
  gap: 50px;
}

.hours_container {
  flex-grow: 3;
}

.hours_label {
  margin-left: 8px;
  font-size: 15px;
  line-height: 1.5;
}

.slider :deep(.v-input__prepend) {
  margin-right: 16px;
}

.plant_origin--buy {
  display: flex;
  flex-direction: row;
  gap: 50px;
}

.message {
  color: var(--error-color);
  font-size: 12px;
  text-align: left;
}
&lt;/style>
</code></pre>
        </article>
      </section>
    </div>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Modules</h3>
      <ul>
        <li><a href="module-AddDestillation.html">AddDestillation</a></li>
        <li><a href="module-App.html">App</a></li>
        <li><a href="module-BaseButton.html">BaseButton</a></li>
        <li><a href="module-BaseCard.html">BaseCard</a></li>
        <li><a href="module-BaseDatePicker.html">BaseDatePicker</a></li>
        <li>
          <a href="module-BaseInputDatePicker.html">BaseInputDatePicker</a>
        </li>
        <li><a href="module-BaseModal.html">BaseModal</a></li>
        <li><a href="module-BaseRadioInput.html">BaseRadioInput</a></li>
        <li><a href="module-BaseTextInput.html">BaseTextInput</a></li>
        <li><a href="module-DestillationForm.html">DestillationForm</a></li>
        <li><a href="module-LoginPage.html">LoginPage</a></li>
        <li><a href="module-PlantData.html">PlantData</a></li>
        <li><a href="module-PlantForm.html">PlantForm</a></li>
        <li>
          <a href="module-PlantIdentification.html">PlantIdentification</a>
        </li>
        <li><a href="module-PlantOrigin.html">PlantOrigin</a></li>
        <li><a href="module-RegistrationPage.html">RegistrationPage</a></li>
        <li><a href="module-TheFooter.html">TheFooter</a></li>
        <li><a href="module-TheHeader.html">TheHeader</a></li>
        <li><a href="module-main.html">main</a></li>
        <li><a href="module-plantActions.html">plantActions</a></li>
        <li><a href="module-plantGetters.html">plantGetters</a></li>
        <li><a href="module-plantMutations.html">plantMutations</a></li>
        <li><a href="module-plantStore.html">plantStore</a></li>
        <li><a href="module-router.html">router</a></li>
        <li><a href="module-store.html">store</a></li>
      </ul>
      <h3>Global</h3>
      <ul>
        <li><a href="global.html#changeValue">changeValue</a></li>
        <li><a href="global.html#changeVisibility">changeVisibility</a></li>
        <li><a href="global.html#closeModal">closeModal</a></li>
        <li><a href="global.html#formatedDate">formatedDate</a></li>
        <li>
          <a href="global.html#plantFormValidation">plantFormValidation</a>
        </li>
        <li><a href="global.html#sendDate">sendDate</a></li>
        <li><a href="global.html#setIntegerNumber">setIntegerNumber</a></li>
        <li><a href="global.html#setIntegerValue">setIntegerValue</a></li>
        <li><a href="global.html#setKeyboard">setKeyboard</a></li>
        <li>
          <a href="global.html#setKeyboardFormatedNumber"
            >setKeyboardFormatedNumber</a
          >
        </li>
        <li>
          <a href="global.html#setKeyboardIntegerNumber"
            >setKeyboardIntegerNumber</a
          >
        </li>
        <li><a href="global.html#setNumberFormat">setNumberFormat</a></li>
        <li><a href="global.html#setValue">setValue</a></li>
        <li><a href="global.html#storeDate">storeDate</a></li>
        <li><a href="global.html#submitPlantForm">submitPlantForm</a></li>
        <li>
          <a href="global.html#submitRegistrationForm"
            >submitRegistrationForm</a
          >
        </li>
        <li><a href="global.html#updateDate">updateDate</a></li>
        <li><a href="global.html#updateValue">updateValue</a></li>
      </ul>
    </nav>

    <br class="clear" />

    <footer>
      Documentation generated by
      <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Mon May 27
      2024 15:11:48 GMT+0200 (czas środkowoeuropejski letni)
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
